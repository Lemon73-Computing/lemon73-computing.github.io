---
title: 月食改革
description: "Lunar Eclipse Restoration"
slug: "0907"
date: 2025-09-07 13:21:00+0900
---

**月食改革 - Lunar Eclipse Restoration**

この資料では、9/4 に LRA にて発生した Element アカウントのインシデント内容の報告、及びそれを受け LRA 全体でアカウント、セキュリティー、ストレージ、システム運用全体の確認と問題点の是正を行い、適切な対処を施す方針について記載しています。

## インシデント内容

### 概要

|  |  |
| -- | -- |
| 発生年月日 | 2025/9/4 |
| 発生場所 | - |
| 組織区分 | LRA 本部 |
| 報告書 | [月食改革](20250907-element-incident.md) |
| 公表年月日 (非公式) | 2025/9/4[^mi1][^mi2][^mi3] |
| 発表年月日 (公式) | 2025/9/7 |
| 概要 | 人為的ミスによる Element の DM 内容が見れなくなる問題 |
| 原因 | 他端末のログイン、セキュリティーキーがない状態でのアカウントのログアウト |
| 調査状況 | 調査終了 |
| 情報漏えい | なし |
| 勧告・意見 | 月食短期特別計画 ([月食改革](20250907-element-incident.md)) |
| 情報提供 | - |

[^mi1]: <https://misskey.io/notes/ac90gxahmzie01b7>
[^mi2]: <https://misskey.io/notes/ac91al7qzcx10ide>
[^mi3]: <https://misskey.io/notes/acaet6vs0fn80gg4>

### 重要事項

今回のインシデントは**セキュリティー関連ではなく**、意図せず SNS の DM 会話記録の一部が喪失したインシデントです。そのため、情報漏えいや資金的影響などの問題は発生していないため、LRA 外部の人に影響はありません。(そもそも、LRA 内部で漏洩して困るデータはほとんどありません)

### 経緯

1. (Element を携帯で利用しようとするも、ログインエラーになる (これの原因は後に、一般的なブラウザ Chrome ではなく、Opera GX を認証に利用していたからだと判明する。リンクを Chrome で起動することで解決))
1. Element を起動、不明なエラーによりネットワーク接続できない
1. アカウントの問題だと考え、一旦ログアウト
1. 再ログインするため、アカウント情報を入力するも、サーバーエラーによりログインできないことがわかる
1. サーバーダウンかと考え、Matrix.org のサーバー状態を確認すると、予想通りサーバーダウンしていた
1. 後日、サーバー復旧後に再ログイン
1. 認証がないことがわかる
1. 不要な他端末のログイン記録を消す (旧 PC のログイン情報)
1. 様々な試行錯誤を行うも、セキュリティーキーがない (設定していないか、保存していない) ことが判明。他端末も現在利用できない状態、また先述の工程でログイン記録を消したため、利用不可能状態
1. 認証が不可能なため、認証をリセットすることで、アカウントを復旧 (ただし、暗号化されている DM の情報が見れなくなった)

### 被害状況

被害に関しては、

- Element は一部の OSS 活動でのみ利用していた
- 公開ルームの情報は暗号化されていないため、特に被害がなかった
- DM の相手は1人のみだった

ため、最小限に済みました。

### 復旧

唯一の被害であった、DM の会話については、以前の会話内容すべてのスクリーンショットをいただき、以前とほとんど変わらない程度まで復旧することができました。彼からはスクリーンショットに加え、復旧の助言をいただけたため、非常に感謝しています。

### 問題点

人為的ミスです。

具体的には、以下の問題が挙げられます。

1. 複数端末の用意ができていなかった (問題発生以前に携帯端末を利用しようと試していたが、ブラウザによるエラーによりログインできていなかった)
1. 突如のサーバーダウンと、ログイン時にその情報を確認することができなかった点 (当初はアカウント側のエラーだと考えていた)
1. セキュリティーキーが何故かなかった (理由は不明)

### 問題以降

1. 認証を新しく作り直すことで、アカウントの復旧を完了 (これにより、DM のデータは抹消された)
1. DM の相手に事情を説明し、スクリーンショットを送ってもらうことで、事実上の復旧
1. セキュリティーキーを作成、保存
1. 携帯に Element アプリケーションをダウンロードし、別端末からの認証ができるように (この際に、Opera GX で認証していたから携帯のログインエラーが起こっていたことを発見、Chrome で認証することで使えるようになる)

## 対策方針

以上のインシデントの内容を踏まえ、Element 以外の SNS でも同様の問題が起こることを危惧し、LRA では以下の方針で対策を行うことを決定しました。

### 期限、結果公表日

- 期限: 2025/9/30
- 扱い: 短期特別計画
- 結果公表日: 2025/10/1 (2025Q4 中期基本計画)

### 概要

- 主要事項
  - 主要 SNS データのバックアップ
  - 主要 SNS のセキュリティーキー発行 (可能なもの)
- 関連事項
  - インシデント対策の具体化
  - セキュリティーの強化
  - 作成したコードやイラストのバックアップ方針の具体化
  - Nix への移行の具体化 (dotfiles)

### 具体的な内容

| 推定時間 | 内容 |
| -- | -- |
| 4h | **主要 SNS データのバックアップ** |
| 2h | **主要 SNS のセキュリティーキー発行** |
| 1day | インシデント対策方針の作成 |
| 4h | (セキュリティーの強化) |
| 1h | コードのバックアップ方針の具体化 |
| 3day | イラストのバックアップ方針の具体化 |
| 2day | Nix 移行への具体化 |
| 3day | Nix の部分的導入 (dotfiles) |

主要事項に関しては終了を義務づけます。関連事項については推奨に留めますが、特に Nix 関連は今回の事例との関連性が低いため、優先度を低くして対応します。

## 最後に

今回は DM のデータ喪失というやや大きなインシデントが起こってしまったことについて、バックアップへの意識が不足していることを認識させられました。このインシデントを踏まえ、具体的な対策に動くことで、組織全体として脆弱性を減らせると信じています。これをただのミスとして終わらせるのではなく、バックアップや再現性の高い環境を目指して行動する良い機会だと考えるべきです。
